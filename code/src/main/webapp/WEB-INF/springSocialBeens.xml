<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

            <!-- Spring social -->
        <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="locations">
                <list>
                    <value>WEB-INF/classes/config/springsocial/springsocial.properties</value>
                </list>
            </property>
        </bean>    
            
        <bean id="connectionFactoryLocator" 
              class="org.springframework.social.connect.support.ConnectionFactoryRegistry">
            <property name="connectionFactories">
                <list>
                    <bean class="org.springframework.social.facebook.connect.FacebookConnectionFactory">
                        <constructor-arg value="${provider.id}"/>
                        <constructor-arg value="${provider.secret"/>	
                    </bean>
                </list>
            </property>
        </bean>

        <bean id="textEncryptor" class="org.springframework.security.crypto.encrypt.Encryptors" 
                    factory-method="noOpText" />

        <bean id="usersConnectionRepository" 
               class="org.springframework.social.connect.jdbc.JdbcUsersConnectionRepository">
            <constructor-arg ref="dataSource" />
            <constructor-arg ref="connectionFactoryLocator" />
            <constructor-arg ref="textEncryptor" />
            <property name="connectionSignUp">
                <bean class="ru.ipccenter.favortrippals.security.SpringConnectionSignUp"/>
            </property>    
        </bean>

        <bean class="org.springframework.social.connect.web.ProviderSignInController">
           <constructor-arg ref="connectionFactoryLocator" />
           <constructor-arg ref="usersConnectionRepository" />		
           <constructor-arg>
               <bean class="ru.ipccenter.favortrippals.security.SpringSecuritySignInAdapter" />
           </constructor-arg>
           <property name="applicationUrl" value="http://localhost:8080/favortrippals" />
           <property name="signInUrl" value="/index.xhtml" />
           <property name="signUpUrl" value="/signup.xhtml" />
        </bean>
		
	<mvc:view-controller path="/signin" />
	
	<mvc:view-controller path="/signout" />
</beans>
